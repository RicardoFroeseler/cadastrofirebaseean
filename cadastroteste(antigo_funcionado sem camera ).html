<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Produtos</title>
</head>
<body>
    <h1>Cadastro de Produtos</h1>
    
    <!-- Formulário de Cadastro -->
    <form id="cadastroTesteForm">
        <!-- Código Interno -->
        <label for="codigoInterno">Código Interno:</label>
        <input type="number" id="codigoInterno" name="codigoInterno" required><br><br>

        <!-- Nome -->
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" required><br><br>

        <!-- Grupo -->
        <label for="grupo">Grupo:</label>
        <input type="text" id="grupo" name="grupo" required><br><br>

        <!-- Quantidade -->
        <label for="quantidade">Quantidade:</label>
        <input type="number" id="quantidade" name="quantidade" required><br><br>

        <!-- Unidade (Pesável) -->
        <label for="unidade">Unidade (Pesável):</label>
        <select id="unidade" name="unidade" required>
            <option value="kg">kg</option>
            <option value="UN">UN</option>
        </select><br><br>

        <!-- Fracionado -->
        <label for="fracionado">Fracionado:</label>
        <input type="checkbox" id="fracionado" name="fracionado"><br><br>

        <button type="submit">Salvar</button>
    </form>

    <!-- Firebase e Firestore -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script> <!-- Firebase Auth -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script> <!-- Firestore -->

    <!-- Carregar a configuração do Firebase -->
    <script src="firebaseConfig.js"></script>

    <!-- Script para salvar dados no Firestore -->
    <script>
        document.getElementById('cadastroTesteForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Previne o envio padrão do formulário

            // Coleta os dados do formulário
            const codigoInterno = parseInt(document.getElementById('codigoInterno').value);
            const nome = document.getElementById('nome').value;
            const grupo = document.getElementById('grupo').value;
            const quantidade = parseFloat(document.getElementById('quantidade').value);
            const unidade = document.getElementById('unidade').value;
            const fracionado = document.getElementById('fracionado').checked; // Checkbox retorna true ou false

            // Salva no Firestore
            firestore.collection('testecadastro').add({
                codigoInterno: codigoInterno,
                nome: nome,
                grupo: grupo,
                quantidade: quantidade,
                unidade: unidade,
                fracionado: fracionado,
                timestamp: firebase.firestore.FieldValue.serverTimestamp() // Adiciona um timestamp
            }).then(() => {
                alert('Produto cadastrado com sucesso!');
                document.getElementById('cadastroTesteForm').reset(); // Limpa o formulário
            }).catch((error) => {
                console.error('Erro ao salvar os dados:', error);
            });
        });
    </script>
</body>
</html>
